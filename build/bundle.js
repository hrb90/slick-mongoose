!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";function n(e){return Object.keys(e).map(function(t){return e[t]})}function i(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function o(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r];return null}function a(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function c(e,t){return e.filter(function(e){return t.indexOf(e)>=0})}function s(e,t){var r=Object.keys(e),n={};return r.forEach(function(r){n[r]=t(e[r])}),n}function d(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.values=n,t.difference=i,t.find=o,t.findIndex=a,t.intersection=c,t.mapValues=s,t.cloneDeep=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eq=function(e,t){var r=function(e,t){return Math.abs(e-t)<.1};return r(e.x,t.x)&&r(e.y,t.y)},t.xProd=function(e,t){return e.x*t.y-e.y*t.x};var n=function(e,t){return e.x*t.x+e.y*t.y},i=function(e,t){return{x:e*t.x,y:e*t.y}},o=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},a=function(e,t){return o(e,i(-1,t))};t.angle=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},t.getConsecutiveCoordPairs=function(e,t,r){return[e,r[(t+1)%r.length]]},t.intersect=function(e,r,i,o,c){void 0===c&&(c=!1);var s=a(r,e),d=a(o,i),u=a(i,e),h=t.xProd(s,d);if(0!==h){var l=t.xProd(u,s)/h,g=t.xProd(u,d)/h,f=function(e){return 0<e&&e<1},p=function(e){return 0===e||1===e};return!(!f(l)||!f(g))||!(!p(l)&&!p(g))&&((f(l)||f(g))&&(!c||0===l||0===g))}if(0!==t.xProd(u,s))return!1;var v=n(u,s)/n(s,s),y=v+n(d,s)/n(s,s);return Math.max(v,y)>0&&Math.min(v,y)<1},t.inInterior=function(e,r){if(e.length<3||e.some(function(e){return t.eq(e,r)}))return!1;for(var n=Math.max.apply(Math,e.map(function(e){return e.x})),i=Math.max.apply(Math,e.map(function(e){return e.y})),o={x:n+1,y:i+1};e.some(function(e){return t.collinear3([e,r,o])});)o.x=o.x+1;var a=0;return e.map(t.getConsecutiveCoordPairs).forEach(function(e){t.intersect(r,o,e[0],e[1],!0)&&(a+=1)}),a%2==1},t.signedArea=function(e){var r=0;return e.map(t.getConsecutiveCoordPairs).forEach(function(e){r+=(e[1].x-e[0].x)*(e[1].y+e[0].y)}),r},t.isClockwise=function(e){return t.signedArea(e)>0},t.collinear3=function(e){return 0===t.signedArea(e)};var c=function(e,t){return e.y-t.y!=0?e.y-t.y:e.x-t.x};t.convexHull=function(e){var r=[],n=e.slice(0),i=n.sort(c)[0];r.unshift(i);var o=n.slice(1);return o.sort(function(e,r){return t.isClockwise([i,e,r])?-1:1}),o.forEach(function(e){for(;r.length>1&&!t.isClockwise([r[1],r[0],e]);)r.shift();r.unshift(e)}),r};var s=function(e,t){var r=a(t,e);return n(r,r)};t.distance=function(e,t){return Math.sqrt(s(e,t))},t.unitVector=function(e,r){var n=t.distance(e,r);return{x:(e.x-r.x)/n,y:(e.y-r.y)/n}},t.pointSegmentDistance=function(e,r,c){if(t.eq(r,c))return t.distance(e,r);var d=s(c,r),u=n(a(e,r),a(c,r))/d;return u=Math.max(0,Math.min(1,u)),t.distance(e,o(r,i(u,a(c,r))))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1),o=r(0);!function(e){e[e.Blue=0]="Blue",e[e.Green=1]="Green",e[e.Orange=2]="Orange",e[e.Gray=3]="Gray",e[e.Pink=4]="Pink"}(n=t.Color||(t.Color={})),t.ALL_COLORS=[n.Pink,n.Blue,n.Gray,n.Green,n.Orange];var a=0,c=function(){return(a+=1)+""},s=function(e){return e.x+","+e.y},d=function(e,t){return s(e)+";"+s(t)};t.createEmptyPlanarGraph=function(){return{infiniteFace:"infinite",vertices:{},edges:{},faces:{infinite:{infinite:!0}}}},t.addEdge=function(e,r,n){var i=t.getVertexKey(e,r),a=t.getVertexKey(e,n);if(i||a)return!i&&a?l(e,a,r):!a&&i?l(e,i,n):h(e,i,a);if(o.values(e.vertices).length>0)throw"KeepGraphConnected";return u(r,n)},t.getEndpoints=function(e,t){return[e.edges[t].origin,e.edges[e.edges[t].twin].origin]},t.removeEdge=function(e,t){var r=o.cloneDeep(e),n=r.edges[t].twin,i=r.edges[t].incidentFace,a=r.edges[n].incidentFace;if(i!==a){(r.faces[i].infinite||r.faces[a].infinite)&&(r.faces[i].infinite=!0,r.infiniteFace=i),r=y(r,t),r=y(r,n);var c=Object.keys(r.edges).filter(function(e){return r.edges[e].incidentFace===a});return delete r.faces[a],c.forEach(function(e){return r.edges[e].incidentFace=i}),delete r.edges[t],delete r.edges[n],r}throw new Error("Please keep the graph connected")},t.removeEdgeByVertices=function(e,r,n){var i=t.getVertexKey(e,r),a=t.getVertexKey(e,n),c=o.find(t.getOutgoingEdgeKeys(e,i),function(t){return e.edges[e.edges[t].twin].origin===a});if(c)return t.removeEdge(e,c);throw new Error("Can't connect already connected vertices")},t.removeVertex=function(e,r){var n=o.cloneDeep(e);return t.getOutgoingEdgeKeys(n,r).forEach(function(e){try{n=t.removeEdge(n,e)}catch(e){n=m(n,r)}}),n},t.removeVertexByCoord=function(e,r){return t.removeVertex(e,t.getVertexKey(e,r))},t.findVp=function(e){if(e.mark1&&e.mark2){var r=t.getBoundaryVertexKeys(e,e.infiniteFace),n=r.length,i=r.indexOf(e.mark1);if(i>-1)return r[(i+n-1)%n]!==e.mark2?r[(i+n-1)%n]:r[(i+1)%n];throw new Error("Marked vertices not on boundary")}throw new Error("Graph is unmarked")},t.getEdgeKeyByCoords=function(e,r,n){var i=t.getVertexKey(e,r),o=t.getVertexKey(e,n),a=t.getOutgoingEdgeKeys(e,i),c=t.getAdjacentVertices(e,i),s=c.indexOf(o);return s>=0?a[s]:null},t.getAdjacentVertices=function(e,r){return t.getOutgoingEdgeKeys(e,r).map(function(t){return e.edges[e.edges[t].next].origin})},t.getBoundaryEdgeKeys=function(e,t){var r=e.faces[t],n=[];if(r.incidentEdge)for(var i=r.incidentEdge;!n.includes(i);)n.push(i),i=e.edges[i].next;return n},t.getBoundaryVertexKeys=function(e,r){return t.getBoundaryEdgeKeys(e,r).map(function(t){return e.edges[t].origin})},t.getBoundaryVertices=function(e,r){return t.getBoundaryVertexKeys(e,r).map(function(t){return e.vertices[t]})},t.getSplitFaceKey=function(e,r,n){var a={x:(r.x+n.x)/2,y:(r.y+n.y)/2},c=g(e,a);if(o.intersection(f(e,r),f(e,n)).includes(c)){var s=function(t){var o=e.vertices[e.edges[t].origin],a=e.vertices[e.edges[e.edges[t].next].origin];return!i.intersect(r,n,o,a)};return t.getBoundaryEdgeKeys(e,c).every(s)?c:null}return null},t.getOutgoingEdgeKeys=function(e,t){var r=[];if(e.vertices[t].incidentEdge)for(var n=e.vertices[t].incidentEdge;!r.includes(n);)r.push(n),n=e.edges[e.edges[n].twin].next;return r},t.getColors=function(e,t){return e.vertices[t].colors},t.safeAddEdge=function(e,r,n){try{return t.addEdge(e,r,n),!0}catch(e){return!1}},t.setColors=function(e,t,r){var n=o.cloneDeep(e);return n.vertices[t].colors=r,n};var u=function(e,r){var n=s(e),i=s(r),o=d(e,r),a=d(r,e),c={x:e.x,y:e.y,incidentEdge:o,colors:t.ALL_COLORS},u={x:r.x,y:r.y,incidentEdge:a,colors:t.ALL_COLORS},h={twin:a,next:a,prev:a,origin:n,incidentFace:"infinite"},l={twin:o,next:o,prev:o,origin:i,incidentFace:"infinite"};return{infiniteFace:"infinite",vertices:(g={},g[n]=c,g[i]=u,g),edges:(f={},f[o]=h,f[a]=l,f),faces:{infinite:{infinite:!0,incidentEdge:o}}};var g,f},h=function(e,r,n){var a=o.cloneDeep(e);if(t.getAdjacentVertices(a,r).includes(n))throw new Error("Can't connect already connected vertices");var s=a.vertices[r],u=a.vertices[n],h=t.getSplitFaceKey(a,s,u);if(h){var l=p(a,r,i.angle(s,u)),g=a.edges[l],f=p(a,n,i.angle(u,s)),y=a.edges[f],m=d(s,u),b=d(u,s),E={origin:r,next:f,prev:g.prev,twin:b,incidentFace:h},x={origin:n,next:l,prev:y.prev,twin:m,incidentFace:h};a.edges[g.prev].next=m,g.prev=b,a.edges[y.prev].next=b,y.prev=m,a.edges[m]=E,a.edges[b]=x;var C=a.faces[h].infinite?v(a,m):m;a.faces[h].incidentEdge=a.edges[C].twin;var w=c(),k={infinite:!1,incidentEdge:C};a.edges[a.edges[C].twin].incidentFace=h,a.edges[C].incidentFace=w;for(var A=a.edges[C].next;A!==C;)a.edges[A].incidentFace=w,A=a.edges[A].next;return a.faces[w]=k,a}throw new Error("Can't connect those vertices")},l=function(e,r,n){var a=t.getSplitFaceKey(e,e.vertices[r],n);if(a){var c=o.cloneDeep(e),u=s(n),h=c.vertices[r],l=p(c,r,i.angle(h,n)),g=c.edges[l],f=g.prev,v=c.edges[f],y=d(h,n),m=d(n,h),b={origin:r,prev:f,twin:m,next:m,incidentFace:a},E={origin:u,prev:y,next:l,twin:y,incidentFace:a};return v.next=y,g.prev=m,c.vertices[u]={x:n.x,y:n.y,colors:t.ALL_COLORS,incidentEdge:m},c.edges[y]=b,c.edges[m]=E,c}throw new Error("Can't connect those vertices")},g=function(e,r){var n=e.infiniteFace;return Object.keys(e.faces).forEach(function(o){e.infiniteFace!==o&&i.inInterior(t.getBoundaryVertices(e,o),r)&&(n=o)}),n},f=function(e,r){var n=t.getVertexKey(e,r);if(n){return t.getOutgoingEdgeKeys(e,n).map(function(t){return e.edges[t].incidentFace})}return[g(e,r)]},p=function(e,r,n){var o=t.getOutgoingEdgeKeys(e,r).map(function(t){var r=e.vertices[e.edges[t].origin],n=e.vertices[e.edges[e.edges[t].next].origin];return[t,i.angle(r,n)]}),a=o.filter(function(e){return e[1]<n}),c=function(e,t){return t[1]-e[1]},s=function(e){return e.sort(c)[0][0]};return s(a.length>0?a:o)};t.getVertexKey=function(e,t){var r=null;for(var n in e.vertices)i.eq(e.vertices[n],t)&&(r=n);return r};var v=function(e,t){for(var r=e.edges[t],n=e.edges[r.twin],o=[e.vertices[n.origin]],a=e.edges[n.next];a!==n;)o.push(e.vertices[a.origin]),a=e.edges[a.next];return i.isClockwise(o)?t:r.twin},y=function(e,t){var r=o.cloneDeep(e),n=r.edges[t].prev,i=r.edges[r.edges[t].twin].next,a=r.edges[t].incidentFace;return r.edges[n].next=i,r.edges[i].prev=n,r.faces[a].incidentEdge=n,r.vertices[r.edges[t].origin].incidentEdge=i,r},m=function(e,r){var n=o.cloneDeep(e);if(1===t.getOutgoingEdgeKeys(n,r).length){var i=n.vertices[r].incidentEdge,a=n.edges[i].twin;return n=y(e,a),delete n.vertices[r],delete n.edges[i],delete n.edges[a],n}throw new Error("Not a leaf vertex!")},b=function(e,t){var r=e.edges[t].twin;return e.edges[t].incidentFace===e.edges[r].incidentFace};t.inducedInteriorSubgraph=function(e,r){for(var n=function(t){return!(r.includes(t)||i.inInterior(r.map(function(t){return e.vertices[t]}),e.vertices[t]))},a=function(r){return t.getEndpoints(e,r).some(n)},c=function(e){return Object.keys(e.vertices).filter(n).filter(function(r){return 1===t.getOutgoingEdgeKeys(e,r).length})},s=function(e){return Object.keys(e.edges).filter(a).filter(function(t){return!b(e,t)})},d=o.cloneDeep(e),u=s(d);u.length>0;)d=t.removeEdge(d,u[0]),u=s(d);for(var h=c(d);h.length>0;)d=t.removeVertex(d,h[0]),h=c(d);return d},t.findChordKey=function(e){var r=null,n=t.getBoundaryVertexKeys(e,e.infiniteFace);return n.forEach(function(i){t.getOutgoingEdgeKeys(e,i).forEach(function(t){var i=e.edges[t];n.includes(e.edges[i.next].origin)&&i.incidentFace!==e.infiniteFace&&e.edges[i.twin].incidentFace!==e.infiniteFace&&(r=t)})}),r},t.splitChordedGraph=function(e,r){var n=t.getEndpoints(e,r),i=n[0],o=n[1],a=t.getBoundaryVertexKeys(e,e.infiniteFace),c=[i,o].map(function(e){return a.indexOf(e)}),s=c[0],d=c[1],u=s<d?[s,d]:[d,s],h=u[0],l=u[1],g=a.slice(h,l+1),f=a.slice(0,h+1).concat(a.slice(l)),p=g.includes(e.mark1)&&g.includes(e.mark2)?[g,f]:[f,g],v=p[0],y=p[1],m=[v,y].map(function(r){return t.inducedInteriorSubgraph(e,r)}),b=m[0],E=m[1];return E.mark1=i,E.mark2=o,[b,E]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(4);!function(e){e[e.AddEdge=0]="AddEdge",e[e.Begin=1]="Begin",e[e.End=2]="End",e[e.UpdateColors=3]="UpdateColors",e[e.RestrictGraph=4]="RestrictGraph",e[e.HighlightEdge=5]="HighlightEdge",e[e.UnhighlightEdge=6]="UnhighlightEdge",e[e.Pause=7]="Pause",e[e.Describe=8]="Describe",e[e.DescribeAddEdges=9]="DescribeAddEdges",e[e.DescribeChordlessOne=10]="DescribeChordlessOne",e[e.DescribeChordlessTwo=11]="DescribeChordlessTwo",e[e.DescribeChordlessThree=12]="DescribeChordlessThree",e[e.DescribeChordlessFour=13]="DescribeChordlessFour",e[e.DescribeChorded=14]="DescribeChorded",e[e.DescribePreColor1=15]="DescribePreColor1",e[e.DescribePreColor2=16]="DescribePreColor2",e[e.DescribePreColor3=17]="DescribePreColor3",e[e.DescribeChord=18]="DescribeChord",e[e.DescribeTriangle=19]="DescribeTriangle"}(n=t.AnimationType||(t.AnimationType={}));var a=function(e){document.getElementById("description").textContent=e},c=function(e){var t=document.createElement("strong");t.id="continueButton",t.innerText="Press spacebar to continue",o.bind("space",function(){o.unbind("space"),e()}),document.getElementById("sidebar").appendChild(t)},s=function(e){document.getElementById(e).remove()},d=[];t.addStep=function(e,t,r){d.push({type:e,pause:t,data:r,addButton:!1})},t.resetAnimation=function(){d=[]},t.postProcessAnimation=function(){[n.DescribeAddEdges,n.DescribeChorded,n.DescribeTriangle,n.DescribeChordlessOne,n.DescribeChordlessTwo,n.DescribeChordlessThree,n.DescribeChordlessFour,n.DescribePreColor1,n.DescribePreColor2,n.DescribePreColor3,n.DescribeChord].forEach(function(e){var t=i.findIndex(d,function(t){return t.type===e});t>=0&&(d[t].addButton=!0)})},t.drawStep=function(e,t){switch(e.type){case n.AddEdge:t.drawEdge(e.data[0],e.data[1],"blue");break;case n.Begin:t.freeze();break;case n.End:t.unfreeze();break;case n.UpdateColors:t.updateColors(e.data.vertex,e.data.colors);break;case n.RestrictGraph:t.highlightGraph(e.data.graph),t.redraw();break;case n.HighlightEdge:t.highlightEdge(e.data[0],e.data[1]),t.redraw();break;case n.UnhighlightEdge:t.unhighlightEdge(),t.redraw();case n.Describe:case n.DescribeAddEdges:case n.DescribeChorded:case n.DescribeTriangle:case n.DescribeChordlessOne:case n.DescribeChordlessTwo:case n.DescribeChordlessThree:case n.DescribeChordlessFour:case n.DescribePreColor1:case n.DescribePreColor2:case n.DescribePreColor3:case n.DescribeChord:a(e.data);break;case n.Pause:}},t.animate=function(e){if(d.length>0){var r=d.shift();t.drawStep(r,e),r.addButton?(e.darken(),c(function(){e.lighten(),t.animate(e),s("continueButton")})):setTimeout(function(){return t.animate(e)},r.pause)}}},function(e,t,r){var n;!function(i,o,a){function c(e,t,r){if(e.addEventListener)return void e.addEventListener(t,r,!1);e.attachEvent("on"+t,r)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return x[e.which]?x[e.which]:C[e.which]?C[e.which]:String.fromCharCode(e.which).toLowerCase()}function d(e,t){return e.sort().join(",")===t.sort().join(",")}function u(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function h(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function l(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(){if(!E){E={};for(var e in x)e>95&&e<112||x.hasOwnProperty(e)&&(E[x[e]]=e)}return E}function p(e,t,r){return r||(r=f()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function v(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function y(e,t){var r,n,i,o=[];for(r=v(e),i=0;i<r.length;++i)n=r[i],k[n]&&(n=k[n]),t&&"keypress"!=t&&w[n]&&(n=w[n],o.push("shift")),g(n)&&o.push(n);return t=p(n,o,t),{key:n,modifiers:o,action:t}}function m(e,t){return null!==e&&e!==o&&(e===t||m(e.parentNode,t))}function b(e){function t(e){e=e||{};var t,r=!1;for(t in E)e[t]?r=!0:E[t]=0;r||(w=!1)}function r(e,t,r,n,i,o){var a,c,s=[],u=r.type;if(!v._callbacks[e])return[];for("keyup"==u&&g(e)&&(t=[e]),a=0;a<v._callbacks[e].length;++a)if(c=v._callbacks[e][a],(n||!c.seq||E[c.seq]==c.level)&&u==c.action&&("keypress"==u&&!r.metaKey&&!r.ctrlKey||d(t,c.modifiers))){var h=!n&&c.combo==i,l=n&&c.seq==n&&c.level==o;(h||l)&&v._callbacks[e].splice(a,1),s.push(c)}return s}function n(e,t,r,n){v.stopCallback(t,t.target||t.srcElement,r,n)||!1===e(t,r)&&(h(t),l(t))}function i(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=s(e);if(t)return"keyup"==e.type&&x===t?void(x=!1):void v.handleKey(t,u(e),e)}function a(){clearTimeout(m),m=setTimeout(t,1e3)}function f(e,r,i,o){function c(r){n(i,r,e),"keyup"!==o&&(x=s(r)),setTimeout(t,10)}E[e]=0;for(var d=0;d<r.length;++d){var u=d+1===r.length,h=u?c:function(t){return function(){w=t,++E[e],a()}}(o||y(r[d+1]).action);p(r[d],h,o,e,d)}}function p(e,t,n,i,o){v._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var a,c=e.split(" ");if(c.length>1)return void f(e,c,t,n);a=y(e,n),v._callbacks[a.key]=v._callbacks[a.key]||[],r(a.key,a.modifiers,{type:a.action},i,e,o),v._callbacks[a.key][i?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e})}var v=this;if(e=e||o,!(v instanceof b))return new b(e);v.target=e,v._callbacks={},v._directMap={};var m,E={},x=!1,C=!1,w=!1;v._handleKey=function(e,i,o){var a,c=r(e,i,o),s={},d=0,u=!1;for(a=0;a<c.length;++a)c[a].seq&&(d=Math.max(d,c[a].level));for(a=0;a<c.length;++a)if(c[a].seq){if(c[a].level!=d)continue;u=!0,s[c[a].seq]=1,n(c[a].callback,o,c[a].combo,c[a].seq)}else u||n(c[a].callback,o,c[a].combo);var h="keypress"==o.type&&C;o.type!=w||g(e)||h||t(s),C=u&&"keydown"==o.type},v._bindMultiple=function(e,t,r){for(var n=0;n<e.length;++n)p(e[n],t,r)},c(e,"keypress",i),c(e,"keydown",i),c(e,"keyup",i)}if(i){for(var E,x={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},k={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A=1;A<20;++A)x[111+A]="f"+A;for(A=0;A<=9;++A)x[A+96]=A.toString();b.prototype.bind=function(e,t,r){var n=this;return e=e instanceof Array?e:[e],n._bindMultiple.call(n,e,t,r),n},b.prototype.unbind=function(e,t){var r=this;return r.bind.call(r,e,function(){},t)},b.prototype.trigger=function(e,t){var r=this;return r._directMap[e+":"+t]&&r._directMap[e+":"+t]({},e),r},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){var r=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!m(t,r.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(x[t]=e[t]);E=null},b.init=function(){var e=b(o);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),i.Mousetrap=b,void 0!==e&&e.exports&&(e.exports=b),void 0!==(n=function(){return b}.call(t,r,t,e))&&(e.exports=n)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(7),o=r(3),a=r(4);document.addEventListener("DOMContentLoaded",function(){var e=new n.GraphDrawingWrapper("canvas"),t=function(){e.frozen||(e.unhighlightVertex(),i.fiveColor(e.graph),o.animate(e))};a.bind("enter",t),document.getElementById("color-graph").addEventListener("click",t),document.getElementById("clear-canvas").addEventListener("click",function(){e.frozen||(e.clearGraph(),e.clear())})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(0),a=function(e,t){switch(e){case i.Color.Pink:return t?"#ffb1e0":"#e47ead";case i.Color.Blue:return t?"#4becff":"#00b7ec";case i.Color.Green:return t?"#33d3aa":"#00a077";case i.Color.Orange:return t?"#faa200":"#f3640d";case i.Color.Gray:return t?"#dfd7cf":"#c9c5b5"}},c=function(){function e(e,t){void 0===t&&(t=12),this.radius=t,this.frozen=!1,this.canvasEl=document.getElementById(e),this.drawCircle=this.drawCircle.bind(this),this.handleClick=this.handleClick.bind(this),this.canvasEl.addEventListener("click",this.handleClick),this.clearGraph()}return e.prototype.clear=function(){this.canvasEl.getContext("2d").clearRect(0,0,this.canvasEl.width,this.canvasEl.height)},e.prototype.clearGraph=function(){this.graph=i.createEmptyPlanarGraph(),this.highlightedGraph=this.graph,this.highlightedVertex=null,this.highlightedEdge=null,this.vertices=[]},e.prototype.darken=function(){this.canvasEl.className="greyer-canvas"},e.prototype.clickVertex=function(e){if(this.highlightedVertex){e!==this.highlightedVertex&&this.drawEdge(e,this.highlightedVertex);var t=this.highlightedVertex;this.unhighlightVertex(),this.drawCircle(t)}else this.highlightVertex(e);this.drawCircle(e)},e.prototype.doesAddEdge=function(e,t){try{return this.graph=i.addEdge(this.graph,e,t),this.highlightedGraph=this.graph,!0}catch(e){return"KeepGraphConnected"===e&&alert("Please keep the graph connected"),!1}},e.prototype.drawCircle=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=i.ALL_COLORS),this.vertices.push(e);var o=this.canvasEl.getContext("2d");o.strokeStyle=t?"lightgrey":"black",o.lineWidth=3,this.highlightedVertex&&n.eq(e,this.highlightedVertex)&&(o.strokeStyle="red"),o.fillStyle="none",o.beginPath(),o.arc(e.x,e.y,this.radius,0,2*Math.PI),o.stroke(),r.length>0&&this.fillCircle(e,t,r)},e.prototype.drawEdge=function(e,t,r){void 0===r&&(r="black"),this.doesAddEdge(e,t)&&this.unsafeDrawEdge(e,t,r)},e.prototype.fillCircle=function(e,t,r){var n=this,i=r.length;r.forEach(function(r,o){var c=n.canvasEl.getContext("2d");c.fillStyle=a(r,t),c.beginPath(),c.arc(e.x,e.y,n.radius,2*o*Math.PI/i,2*(o+1)*Math.PI/i),c.lineTo(e.x,e.y),c.closePath(),c.fill()})},e.prototype.freeze=function(){this.frozen=!0},e.prototype.handleClick=function(e){var t=this;if(e.preventDefault(),!this.frozen)try{var r,i,o=this.translateEventToCoord(e);this.vertices.forEach(function(e){var a=n.distance(e,o);a<=t.radius&&(r=e),a<=2*t.radius&&(i=e)}),r?this.clickVertex(r):i||this.drawCircle(o)}catch(e){alert(e.message)}},e.prototype.highlightEdge=function(e,t){this.highlightedEdge=[e,t]},e.prototype.highlightGraph=function(e){this.highlightedGraph=e},e.prototype.highlightVertex=function(e){this.highlightedVertex?this.unhighlightVertex():this.highlightedVertex=e},e.prototype.isHighlightedEdge=function(e,t){if(null===this.highlightedEdge)return!1;var r=this.highlightedEdge[0],i=this.highlightedEdge[1];return n.eq(r,e)&&n.eq(i,t)||n.eq(r,t)&&n.eq(i,e)},e.prototype.lighten=function(){this.canvasEl.className=""},e.prototype.redraw=function(){var e=this;this.clear();var t=Object.keys(this.highlightedGraph.vertices),r=o.difference(Object.keys(this.graph.vertices),t),n=this.graph;t.forEach(function(t){var r=n.vertices[t];e.drawCircle(r,!1,r.colors)}),r.forEach(function(t){var r=n.vertices[t];e.drawCircle(r,!0,r.colors)}),Object.keys(n.edges).forEach(function(r){var o,a=i.getEndpoints(n,r),c=a[0],s=a[1];o=t.includes(c)&&t.includes(s)?"black":"lightgrey",e.isHighlightedEdge(n.vertices[c],n.vertices[s])&&(o="red"),e.unsafeDrawEdge(n.vertices[c],n.vertices[s],o)}),this.graph=n},e.prototype.translateEventToCoord=function(e){return{x:e.x-this.canvasEl.offsetLeft+window.pageXOffset,y:e.y-this.canvasEl.offsetTop+window.pageYOffset,colors:[]}},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.unhighlightEdge=function(){this.highlightedEdge=null},e.prototype.unhighlightVertex=function(){this.highlightedVertex=null},e.prototype.unsafeDrawEdge=function(e,t,r){var i=this.canvasEl.getContext("2d"),o=n.unitVector(e,t);i.strokeStyle=r,i.lineWidth=1,i.beginPath(),i.moveTo(e.x-this.radius*o.x,e.y-this.radius*o.y),i.lineTo(t.x+this.radius*o.x,t.y+this.radius*o.y),i.stroke()},e.prototype.updateColors=function(e,t){var r=i.getVertexKey(this.graph,e);this.graph=i.setColors(this.graph,r,t),this.redraw()},e}();t.GraphDrawingWrapper=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(3),a=r(8),c=r(0),s=function(e,t,r){var i=e.filter(function(e){return!(n.eq(e,t)||n.eq(e,r))});return Math.min.apply(Math,i.map(function(e){return n.pointSegmentDistance(e,t,r)}))},d=function(e,t){return o.addStep(o.AnimationType.AddEdge,0,t),i.addEdge(e,t[0],t[1])},u=function(e){return n.convexHull(c.values(e.vertices)).map(n.getConsecutiveCoordPairs).forEach(function(t){i.safeAddEdge(e,t[0],t[1])&&(e=d(e,t))}),e},h=function(e,t,r){for(var n=-1,o=[],a=t.map(function(t){return[e.edges[t].origin,e.edges[e.edges[e.edges[t].next].next].origin]}),c=t.map(function(t){return e.vertices[e.edges[t].origin]}),d=0;d<a.length;d++){var u=e.vertices[a[d][0]],h=e.vertices[a[d][1]];if(i.getSplitFaceKey(e,u,h)===r){var l=s(c,u,h);l>n&&(n=l,o=[u,h])}}return o},l=function(e,t){var r=i.getBoundaryEdgeKeys(e,t);if(r.length>3&&e.infiniteFace!==t){var n=h(e,r,t);e=d(e,n)}return e},g=function(e){return Object.keys(e.faces).every(function(t){return e.infiniteFace===t||3===i.getBoundaryEdgeKeys(e,t).length})},f=function(e){for(;!g(e);)for(var t in e.faces)i.getBoundaryEdgeKeys(e,t).length>3&&(e=l(e,t));return o.addStep(o.AnimationType.DescribeAddEdges,0,a.EXPLANATIONS.addEdges),e},p=function(e){var t=i.getBoundaryVertexKeys(e,e.infiniteFace);return e.mark1=t[0],e.mark2=t[1],o.addStep(o.AnimationType.DescribePreColor1,2e3,a.EXPLANATIONS.fiveChoices),Object.keys(e.vertices).forEach(function(t){e=v(e,t,i.ALL_COLORS,0)}),o.addStep(o.AnimationType.DescribePreColor2,2e3,a.EXPLANATIONS.restrictOuter),t.forEach(function(t){return e=v(e,t,i.ALL_COLORS.slice(0,3),0)}),o.addStep(o.AnimationType.Pause,1e3,{}),e=v(e,e.mark1,[i.Color.Pink],0),e=v(e,e.mark2,[i.Color.Blue],0),o.addStep(o.AnimationType.DescribePreColor3,2e3,a.EXPLANATIONS.endPreColor1),o.addStep(o.AnimationType.DescribeChord,2e3,a.EXPLANATIONS.endPreColor2),e},v=function(e,t,r,n){return o.addStep(o.AnimationType.UpdateColors,n,{vertex:e.vertices[t],colors:r}),i.setColors(e,t,r)},y=function(e){var t=[i.getColors(e,e.mark1)[0],i.getColors(e,e.mark2)[0]],r=c.difference(Object.keys(e.vertices),[e.mark1,e.mark2])[0],n=c.difference(i.getColors(e,r),t)[0];o.addStep(o.AnimationType.DescribeTriangle,800,a.EXPLANATIONS.baseCase);var s=v(e,r,[n],100);return o.addStep(o.AnimationType.Pause,300,{}),s},m=function(e,t){var r=c.cloneDeep(e);return Object.keys(t.vertices).forEach(function(e){r=i.setColors(r,e,i.getColors(t,e))}),r},b=function(e){var t=i.getBoundaryVertexKeys(e,e.infiniteFace),r=i.findVp(e),n=c.difference(i.getColors(e,r),i.getColors(e,e.mark1)).slice(0,2);o.addStep(o.AnimationType.DescribeChordlessOne,800,a.EXPLANATIONS.chordlessPartOne);var s,d=v(e,r,n,800),u=i.removeVertex(d,r);o.addStep(o.AnimationType.DescribeChordlessTwo,800,a.EXPLANATIONS.chordlessPartTwo),i.getAdjacentVertices(e,r).forEach(function(r){t.includes(r)?r!==e.mark1&&(s=r):u=v(u,r,c.difference(i.getColors(u,r),n).slice(0,3),300)}),o.addStep(o.AnimationType.DescribeChordlessThree,800,a.EXPLANATIONS.chordlessPartThree),u=x(u);var h=m(d,u);return o.addStep(o.AnimationType.RestrictGraph,0,{graph:h}),o.addStep(o.AnimationType.DescribeChordlessFour,800,a.EXPLANATIONS.chordlessPartFour),h=v(h,r,c.difference(n,i.getColors(h,s)).slice(0,1),800),o.addStep(o.AnimationType.Pause,300,{}),h},E=function(e,t){o.addStep(o.AnimationType.HighlightEdge,800,i.getEndpoints(e,t).map(function(t){return e.vertices[t]})),o.addStep(o.AnimationType.DescribeChorded,800,a.EXPLANATIONS.chorded),o.addStep(o.AnimationType.UnhighlightEdge,0,null);var r=i.splitChordedGraph(e,t),n=r[0],c=r[1];n=x(n),c=v(c,c.mark1,i.getColors(n,c.mark1),800),c=v(c,c.mark2,i.getColors(n,c.mark2),800),o.addStep(o.AnimationType.HighlightEdge,800,i.getEndpoints(e,t).map(function(t){return e.vertices[t]})),o.addStep(o.AnimationType.UnhighlightEdge,0,null),c=x(c);var s=m(e,n);return s=m(s,c),o.addStep(o.AnimationType.Pause,300,{}),s},x=function(e){if(o.addStep(o.AnimationType.RestrictGraph,0,{graph:e}),o.addStep(o.AnimationType.Pause,300,{}),3==c.values(e.vertices).length)return y(e);var t=i.findChordKey(e);return t?E(e,t):b(e)};t.fiveColor=function(e){o.resetAnimation(),o.addStep(o.AnimationType.Begin,0,{});var t=x(p(f(u(e))));return o.addStep(o.AnimationType.RestrictGraph,0,{graph:t}),o.addStep(o.AnimationType.Describe,0,a.EXPLANATIONS.finished),o.addStep(o.AnimationType.End,0,{}),o.postProcessAnimation(),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i={addEdges:"First, we add edges so that the graph is triangulated and 2-connected (i.e.\n  can't be disconnected by removing one edge or vertex). Adding edges only makes\n  our problem harder; a coloring of the new graph will work as a coloring of the\n  original graph.",fiveChoices:"We begin with all vertices having five possible colors",restrictOuter:"Next, we restrict outer vertices to three possible colors",endPreColor1:"We color two adjacent outer vertices pink and blue. Note that the\n  interior vertices have five possible colors, two outer vertices are colored,\n  and the rest of the outer vertices have three possible colors.\n  This will be an invariant throughout the recursive algorithm.",endPreColor2:"At each recursive step of our algorithm, we will decide what to do\n  based on whether the graph has a chord --- an interior edge between two outer vertices.\n  When we see a chord, we'll highlight it in red.",baseCase:"The triangle is the base case of our algorithm. As promised by our\n  invariant, it has two colored vertices and one vertex with three choices.\n  So we can always color the third vertex.",chordlessPartOne:"There is no chord. We find a vertex on the outside of the\n  graph that is a neighbor of a colored vertex and restrict it to two colors,\n  not including the color of the colored vertex.",chordlessPartTwo:"Next, we ensure that the neighbors of the vertex in the interior of\n  the graph can't be colored with those two colors. Only one of this vertex's\n  neighbors can be colored with even one of the two colors, so we will be able\n  to come back and properly color this vertex.",chordlessPartThree:"We recursively color the graph with the vertex removed. Note that\n  once we remove the vertex, the coloring invariant holds -- two outer vertices are colored, other outer vertices have\n  three possible colors, and interior vertices have five possible colors.",chordlessPartFour:"Color the vertex we removed",chorded:"There is a chord; we split the graph and recursively color the subgraphs. The color\n  invariant holds for the subgraph with the vertices we've already colored.",finished:"We're done!"};t.EXPLANATIONS=n.mapValues(i,function(e){return e.replace("\n","")})}]);